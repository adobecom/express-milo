<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Full Carousel Test</title>
    <link rel="stylesheet" href="express/code/blocks/template-x-promo/template-x-promo.css">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .template { border: 1px solid #ccc; padding: 10px; margin: 10px; display: inline-block; }
        .basic-carousel { border: 2px solid blue; padding: 20px; }
        .multiple-up { background: #f0f0f0; padding: 20px; }
        .simple-template { background: white; padding: 16px; margin: 8px; text-align: center; max-width: 200px; }
        
        /* Add some basic carousel styles */
        .basic-carousel-container { position: relative; overflow: hidden; }
        .basic-carousel-platform { display: flex; transition: transform 0.3s ease; }
        .basic-carousel-element { flex: 0 0 auto; }
        .basic-carousel-controls-wrapper { margin-top: 10px; text-align: center; }
        .basic-carousel-arrow { 
            background: #1976D2; 
            color: white; 
            border: none; 
            padding: 8px 12px; 
            margin: 0 5px; 
            cursor: pointer; 
            border-radius: 4px; 
        }
        
        /* Proper template-promo button styling */
        .ax-template-x-promo > .button-container {
            display: flex;
            margin-top: 16px;
        }
        .ax-template-x-promo > .button-container a.button.accent {
            background-color: var(--color-background-accent-default, #1976D2);
            color: white;
            margin: 0;
            font-size: var(--body-font-size-m, 16px);
            padding: var(--spacing-100, 12px) var(--spacing-300, 24px);
            border-radius: 1000px;
            text-decoration: none;
            border: none;
            cursor: pointer;
            font-weight: 500;
        }
        .ax-template-x-promo > .button-container a.button.accent:hover {
            background-color: var(--color-background-accent-hover, #1565C0);
        }
    </style>
</head>
<body>
    <h1>🎪 Full Carousel Test</h1>

    <div class="section ax-template-x-promo">
        <div class="template-x-promo">
            <div class="recipe">test</div>
        </div>
    </div>

    <script type="module">
        console.log('🚀 Starting full carousel test...');
        
        // Mock ALL the dependencies globally before any imports
        window.getLibs = () => './express/code/scripts';
        
        // Mock createTag globally for basic-carousel
        window.createTag = (tag, attrs) => {
            const el = document.createElement(tag);
            if (attrs) {
                Object.keys(attrs).forEach(key => {
                    if (key === 'class') el.className = attrs[key];
                    else el.setAttribute(key, attrs[key]);
                });
            }
            return el;
        };
        
        // Mock loadStyle globally
        window.loadStyle = () => Promise.resolve();
        
        console.log('✅ All globals mocked');
        
        try {
            const module = await import('./express/code/blocks/template-x-promo/template-x-promo.js');
            console.log('✅ Module loaded:', module);
            
            const block = document.querySelector('.template-x-promo');
            console.log('🎯 Found block:', block);
            
            await module.default(block);
            console.log('✅ Block initialized');
            
        } catch (error) {
            console.error('❌ Error:', error);
        }
    </script>
</body>
</html>
