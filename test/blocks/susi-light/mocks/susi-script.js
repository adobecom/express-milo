/* eslint-disable */
(()=>{var r={};r=":host{display:block}:host,.overflow-page{width:100%;height:100%}.main,.overflow{height:100%;transition:transform .3s,opacity .3s,visibility .3s}.overflow-page{grid-template-columns:100% 100%;display:grid;position:relative;overflow:hidden}.overflow{opacity:0;visibility:hidden;inset:0 -100% 0 100%}.overflow-page.overflow--active .main{opacity:0;visibility:hidden;transform:translate(-100%)}.overflow-page.overflow--active .overflow{opacity:1;visibility:visible;transform:translate(-100%)}:host *{box-sizing:border-box}:host,#sentry-container,#sentry-container iframe{color-scheme:normal;background:0 0;border:0;width:100%;height:100%}#sentry-iframe{position:fixed;top:-10000px;left:-10000px}@-webkit-keyframes shimmer{0%{background-position:-100% 0}to{background-position:100% 0}}@keyframes shimmer{0%{background-position:-1200px 0}to{background-position:1200px 0}}.social-button-loader{background:linear-gradient(90deg,#f8f8f8 8%,#eee 18%,#f8f8f8 33%) 0 0/1200px 100%;animation-name:shimmer;animation-duration:2.2s;animation-timing-function:linear;animation-iteration-count:infinite;animation-fill-mode:forwards}#sentry-container.light-mode{--blue-100-rgb:224,242,255;--blue-100:rgba(var(--blue-100-rgb));--blue-200-rgb:202,232,255;--blue-200:rgba(var(--blue-200-rgb));--blue-300-rgb:181,222,255;--blue-300:rgba(var(--blue-300-rgb));--blue-400-rgb:150,206,253;--blue-400:rgba(var(--blue-400-rgb));--blue-500-rgb:120,187,250;--blue-500:rgba(var(--blue-500-rgb));--blue-600-rgb:89,167,246;--blue-600:rgba(var(--blue-600-rgb));--blue-700-rgb:56,146,243;--blue-700:rgba(var(--blue-700-rgb));--blue-800-rgb:20,122,243;--blue-800:rgba(var(--blue-800-rgb));--blue-900-rgb:2,101,220;--blue-900:rgba(var(--blue-900-rgb));--blue-1000-rgb:0,84,182;--blue-1000:rgba(var(--blue-1000-rgb));--blue-1100-rgb:0,68,145;--blue-1100:rgba(var(--blue-1100-rgb));--blue-1200-rgb:0,53,113;--blue-1200:rgba(var(--blue-1200-rgb));--blue-1300-rgb:0,39,84;--blue-1300:rgba(var(--blue-1300-rgb));--blue-1400-rgb:0,28,60;--blue-1400:rgba(var(--blue-1400-rgb));--red-100-rgb:255,235,231;--red-100:rgba(var(--red-100-rgb));--red-200-rgb:255,221,214;--red-200:rgba(var(--red-200-rgb));--red-300-rgb:255,205,195;--red-300:rgba(var(--red-300-rgb));--red-400-rgb:255,183,169;--red-400:rgba(var(--red-400-rgb));--red-500-rgb:255,155,136;--red-500:rgba(var(--red-500-rgb));--red-600-rgb:255,124,101;--red-600:rgba(var(--red-600-rgb));--red-700-rgb:247,92,70;--red-700:rgba(var(--red-700-rgb));--red-800-rgb:234,56,41;--red-800:rgba(var(--red-800-rgb));--red-900-rgb:211,21,16;--red-900:rgba(var(--red-900-rgb));--red-1000-rgb:180,0,0;--red-1000:rgba(var(--red-1000-rgb));--red-1100-rgb:147,0,0;--red-1100:rgba(var(--red-1100-rgb));--red-1200-rgb:116,0,0;--red-1200:rgba(var(--red-1200-rgb));--red-1300-rgb:89,0,0;--red-1300:rgba(var(--red-1300-rgb));--red-1400-rgb:67,0,0;--red-1400:rgba(var(--red-1400-rgb));--gray-50-rgb:255,255,255;--gray-50:rgb(var(--gray-50-rgb));--gray-75-rgb:253,253,253;--gray-75:rgb(var(--gray-75-rgb));--gray-100-rgb:248,248,248;--gray-100:rgb(var(--gray-100-rgb));--gray-200-rgb:230,230,230;--gray-200:rgb(var(--gray-200-rgb));--gray-300-rgb:213,213,213;--gray-300:rgb(var(--gray-300-rgb));--gray-400-rgb:177,177,177;--gray-400:rgb(var(--gray-400-rgb));--gray-500-rgb:144,144,144;--gray-500:rgb(var(--gray-500-rgb));--gray-600-rgb:109,109,109;--gray-600:rgb(var(--gray-600-rgb));--gray-700-rgb:70,70,70;--gray-700:rgb(var(--gray-700-rgb));--gray-800-rgb:34,34,34;--gray-800:rgb(var(--gray-800-rgb));--gray-900-rgb:0,0,0;--gray-900:rgb(var(--gray-900-rgb))}#sentry-container.dark-mode{--blue-100-rgb:0,56,119;--blue-100:rgba(var(--blue-100-rgb));--blue-200-rgb:0,65,138;--blue-200:rgba(var(--blue-200-rgb));--blue-300-rgb:0,77,163;--blue-300:rgba(var(--blue-300-rgb));--blue-400-rgb:0,89,194;--blue-400:rgba(var(--blue-400-rgb));--blue-500-rgb:3,103,224;--blue-500:rgba(var(--blue-500-rgb));--blue-600-rgb:19,121,243;--blue-600:rgba(var(--blue-600-rgb));--blue-700-rgb:52,143,244;--blue-700:rgba(var(--blue-700-rgb));--blue-800-rgb:84,163,246;--blue-800:rgba(var(--blue-800-rgb));--blue-900-rgb:114,183,249;--blue-900:rgba(var(--blue-900-rgb));--blue-1000-rgb:143,202,252;--blue-1000:rgba(var(--blue-1000-rgb));--blue-1100-rgb:174,219,254;--blue-1100:rgba(var(--blue-1100-rgb));--blue-1200-rgb:204,233,255;--blue-1200:rgba(var(--blue-1200-rgb));--blue-1300-rgb:232,246,255;--blue-1300:rgba(var(--blue-1300-rgb));--blue-1400-rgb:255,255,255;--blue-1400:rgba(var(--blue-1400-rgb));--red-100-rgb:123,0,0;--red-100:rgba(var(--red-100-rgb));--red-200-rgb:141,0,0;--red-200:rgba(var(--red-200-rgb));--red-300-rgb:165,0,0;--red-300:rgba(var(--red-300-rgb));--red-400-rgb:190,4,3;--red-400:rgba(var(--red-400-rgb));--red-500-rgb:215,25,19;--red-500:rgba(var(--red-500-rgb));--red-600-rgb:234,56,41;--red-600:rgba(var(--red-600-rgb));--red-700-rgb:246,88,67;--red-700:rgba(var(--red-700-rgb));--red-800-rgb:255,117,94;--red-800:rgba(var(--red-800-rgb));--red-900-rgb:255,149,129;--red-900:rgba(var(--red-900-rgb));--red-1000-rgb:255,176,161;--red-1000:rgba(var(--red-1000-rgb));--red-1100-rgb:255,201,189;--red-1100:rgba(var(--red-1100-rgb));--red-1200-rgb:255,222,216;--red-1200:rgba(var(--red-1200-rgb));--red-1300-rgb:255,241,238;--red-1300:rgba(var(--red-1300-rgb));--red-1400-rgb:255,255,255;--red-1400:rgba(var(--red-1400-rgb));--gray-50-rgb:29,29,29;--gray-50:rgb(var(--gray-50-rgb));--gray-75-rgb:38,38,38;--gray-75:rgb(var(--gray-75-rgb));--gray-100-rgb:50,50,50;--gray-100:rgb(var(--gray-100-rgb));--gray-200-rgb:63,63,63;--gray-200:rgb(var(--gray-200-rgb));--gray-300-rgb:84,84,84;--gray-300:rgb(var(--gray-300-rgb));--gray-400-rgb:112,112,112;--gray-400:rgb(var(--gray-400-rgb));--gray-500-rgb:144,144,144;--gray-500:rgb(var(--gray-500-rgb));--gray-600-rgb:178,178,178;--gray-600:rgb(var(--gray-600-rgb));--gray-700-rgb:209,209,209;--gray-700:rgb(var(--gray-700-rgb));--gray-800-rgb:235,235,235;--gray-800:rgb(var(--gray-800-rgb));--gray-900-rgb:255,255,255;--gray-900:rgb(var(--gray-900-rgb))}";let e=["bg-bg","cs-cz","da-dk","de-de","el-gr","en-ae","en-gb","en-hr","en-il","en-ke","en-lk","en-mo","en-mu","en-ng","en-tt","en-us","en-vn","en-xm","es-bo","es-do","es-es","es-la","es-mx","es-na","es-pa","es-py","es-sv","es-uy","et-ee","fi-fi","fil-ph","fr-ca","fr-fr","fr-ma","fr-xm","hi-in","hr-hr","hu-hu","id-id","it-it","in-id","ja-jp","ko-kr","lt-lt","lv-lv","nb-no","nl-nl","ms-my","pl-pl","pt-br","ro-ro","ru-ru","sk-sk","sl-si","sr-rs","sr-sp","sv-se","th-th","tr-tr","uk-ua","vi-vn","zh-cn","zh-hans","zh-hant","zh-mo","zh-tw"],t=["en-us","es-es","fr-fr","sr-rs","zh-cn"];function a(r){let a=r.toLowerCase().replace("_","-"),[i]=a.split("-");if(e.includes(a))return a;let n=t.find(r=>r.startsWith(i))||e.find(r=>r.startsWith(i));return n||"en-us"}let i={LOCAL:"local",STAGE:"stage",PROD:"prod"};function n(r,e=!1){return e?i.STAGE:r.includes("localhost.corp.adobe.com")?i.LOCAL:r.includes("identity-stage.adobe.com")?i.STAGE:i.PROD}class s extends Error{name="ElmError"}let g={[i.LOCAL]:"https://localhost.corp.adobe.com:8081",[i.STAGE]:"https://auth-light.identity-stage.adobe.com/sentry",[i.PROD]:"https://auth-light.identity.adobe.com/sentry"},o={[i.LOCAL]:"https://localhost.corp.adobe.com:25000",[i.STAGE]:"https://auth-light.identity-stage.adobe.com",[i.PROD]:"https://auth-light.identity.adobe.com"},b={[i.LOCAL]:"https://localhost.corp.adobe.com:4200/signin",[i.STAGE]:"https://auth-stg1.services.adobe.com/signin/v1/audit",[i.PROD]:"https://auth.services.adobe.com/signin/v1/audit"};i.LOCAL,i.STAGE,i.PROD,i.LOCAL,i.STAGE,i.PROD;let l=r=>g[r],d=r=>o[r],u=r=>b[r],h=new Map,c=new Map;async function p(r,e=!1){let t=e?h:c;if(t.has(r))return t.get(r);{var a;let i=n(window.location.href,e),s=l(i),g=(a=`${s}/${r.script}`,new Promise((r,e)=>{let t=document.createElement("script");t.src=a,document.head.appendChild(t),t.onload=r,t.onerror=e}));return t.set(r,g),g}}function m(r){try{return JSON.parse(r)}catch(e){return r}}function v(r,e,t){if(r&&Object.prototype.hasOwnProperty.call(r,e)&&"object"==typeof r[e]&&"function"==typeof r[e].subscribe){let a=r[e];a.subscribe(r=>t(m(r)))}else console.error("No port: "+e)}var y={variants:[["edu-express","EduExpress"],["sandbox","Sandbox"],["standard","Standard"]],locales:["bg-bg","cs-cz","da-dk","de-de","el-gr","en-ae","en-gb","en-hr","en-il","en-ke","en-lk","en-mo","en-mu","en-ng","en-tt","en-us","en-vn","en-xm","es-bo","es-do","es-es","es-la","es-mx","es-na","es-pa","es-py","es-sv","es-uy","et-ee","fi-fi","fil-ph","fr-ca","fr-fr","fr-ma","fr-xm","hi-in","hr-hr","hu-hu","id-id","in-id","it-it","ja-jp","ko-kr","lt-lt","lv-lv","ms-my","nb-no","nl-nl","pl-pl","pt-br","ro-ro","ru-ru","sk-sk","sl-si","sr-rs","sr-sp","sv-se","th-th","tr-tr","uk-ua","vi-vn","zh-cn","zh-hans","zh-hant","zh-mo","zh-tw"],example:"__NAME__.__LOCALE__.69bbf9e3.js"};let f=new Map(y.variants),w=new Map;function _(r,e){let t=f.get(r),i=a(e);if(!t)throw Error("Invalid variant.");y.locales.includes(i)||(console.warn(`Locale ${i} not found for variant ${r}, defaulting to "en-us".`),i="en-us");let n=y.example.replace("__NAME__",r).replace("__LOCALE__",i);return w.has(n)||w.set(n,{script:n,name:t,translations:y.translations}),w.get(n)}let E=["relay","client_id","locale","redirect_uri","scope","sl","response_type","dt"];document.querySelectorAll('meta[name="susi-sentry-preload"]').forEach(r=>{let e="true"===r.dataset.stage,t=r.dataset.locale,a=_(r.content,t);a&&p(a,e)});class P extends HTMLElement{renderRoot;isConstructed=!1;_authparams=null;_config=null;_variant=null;_stage=!1;_popup=!1;module;_variantPromise=null;logMessage;requiredParams=["authParams","config","variant"];constructor(){super();try{this.renderRoot=this.attachShadow({mode:"open"}),this.popup=this.getAttribute("popup"),this.stage=this.getAttribute("stage"),this.variant=this.getAttribute("variant")}catch(r){console.warn("SUSI Light - Missing parameters on init.",r)}}connectedCallback(){this.isConstructed=!0,this.attemptRenderModule()}set variant(r){r&&(this._variant=r),this.attemptRenderModule()}get variant(){return this._variant??""}get locale(){return this.authParams.locale}get popup(){return this._popup}set popup(r){this._popup="string"==typeof r?"true"===r:!!r,this.attemptRenderModule()}get stage(){return this._stage}set stage(r){this._stage="string"==typeof r?"true"===r:!!r,this.attemptRenderModule()}get darkMode(){return this.authParams?.dt}set authParams(r){this._authparams=r,this.attemptRenderModule()}get authParams(){return this._authparams}set config(r){this._config=r,this.attemptRenderModule()}get config(){return this._config}get systemParams(){return{mode:this.popup?"popup":"redirect"}}get appState(){if(!this.authParams)return{};let r=this.authParams.relay??function(){let r=new Uint8Array(16);crypto.getRandomValues(r),r[6]=15&r[6]|64,r[8]=63&r[8]|128;let e=Array.from(r,r=>r.toString(16).padStart(2,"0")),t=[...e.slice(0,4),"-",...e.slice(4,6),"-",...e.slice(6,8),"-",...e.slice(8,10),"-",...e.slice(10)].join("");return t}(),e=!!this.stage,t={...this.authParams,sl:window.origin,sl_stage:e,relay:r},a=r=>E.includes(r),i=Object.fromEntries(Object.entries(t).filter(([r,e])=>e&&a(r))),n=Object.entries(t).map(([r,e])=>[r,e.toString()]);return{queryState:i,authParams:n,systemParams:this.systemParams,config:this.config}}async initializeApplication(r,e){var t,g;let o=n(window.location.href,this.stage),b=(t=this.module,g=a(this.locale),o===i.LOCAL?t.translations:window.ElmTranslations[t.name][g]),l=window.Elm[this.module.name].Main.init({node:r,flags:{...this.appState,translations:b}});return l.ports&&(v(l.ports,"onOpenPopup",r=>{!function({url:r,title:e,w:t,h:a}){let i=void 0!==window.screenLeft?window.screenLeft:window.screenX,n=void 0!==window.screenTop?window.screenTop:window.screenY,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,g=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,o=(s-parseInt(t))/2+i,b=(g-parseInt(a))/2+n;window.open(r,e,`
    menubar=0,
    resizable=0,
    scrollbars=no,
    width=${t}, 
    height=${a}, 
    top=${b}, 
    left=${o}
    `)}({url:r,title:"SUSI Light Login",w:"688",h:"768"})}),v(l.ports,"onSentryEvent",r=>{this.dispatchEvent(new CustomEvent(r.name,{detail:r.data})),"on-analytics"===r.name&&(e.postMessage(r),this.logMessage({name:"app-analytics",message:r.data}))}),v(l.ports,"onLogMessage",r=>{if("app-error"===r.name){let e=new s(r.message);this.dispatchError(e)}else this.logMessage(r)})),l}static observedAttributes=["authParams","config","stage","variant","stage","popup"];createShadow(){return this.attachShadow({mode:"closed"})}renderModule(){this.module=_(this.variant,this.locale),this._variantPromise=p(this.module,this.stage),this.isConstructed&&this.render()}attemptRenderModule(){let r=this.requiredParams.filter(r=>!this[r]);if(r.length>0){console.warn(`All required parameters not yet supplied: ${r.join(", ")}`);return}let{queryState:e}=this.appState,t=n(window.location.href,this.stage);this.logMessage=function(r,e,t,a){let n=function(r){switch(r){case i.LOCAL:return"susi-light-local";case i.STAGE:return"susi-light-stage";case i.PROD:return"susi-light-prod";default:return"susi-light-unknown"}}(r);return function(i){fetch(u(r),{method:"POST",headers:{"Content-Type":"application/json","X-IMS-CLIENTID":e,"X-DEBUG-ID":t},body:JSON.stringify({...i,variant:a,envName:n,clientId:e})})}}(t,e.client_id,e.relay,this.variant),this.renderModule()}async render(){var e;let t=n(window.location.href,this.stage),a=d(t),i=new Promise((r,e)=>{window.addEventListener("message",function t(i){if(a.includes(i.origin)){if("connection-invalid-origin"===i.data)e(Error("Invalid origin")),window.removeEventListener("message",t);else if("connection"===i.data){if(0===i.ports.length)return e(Error("Missing port"));r(i.ports[0]),window.removeEventListener("message",t)}}})}),{client_id:s,relay:g}=this.appState.queryState,o=this.authParams.st_valid_origin,b=this.darkMode?"dark-mode":"light-mode";if(this.shadowRoot)this.shadowRoot.innerHTML=`
        <style>
          ${(e=r)&&e.__esModule?e.default:e}
        </style>
        <section id="sentry-container" class=${b}>
          <section id="sentry"></sentry>
        </section>
        <iframe
          aria-hidden="true"
          id="sentry-iframe"
          height="1px" 
          width="1px" 
          src="${function(){let r=new URL("/sentry/iframe/index.html",a);return r.searchParams.append("client_id",s),r.searchParams.append("relay",g),o&&r.searchParams.append("st_valid_origin","true"),r.searchParams.append("asserted_origin",window.location.origin),r.toString()}()}" />
    `;else throw Error("shadowRoot not available");try{let[r]=await Promise.all([i,this._variantPromise]),e=await this.initializeApplication(this.renderRoot.getElementById("sentry"),r),t=this.logMessage;window.addEventListener("message",r=>{if(["localhost.corp.adobe.com","auth-light.identity-stage.adobe.com","auth-light.identity.adobe.com"].some(e=>r.origin.includes(e)))try{let t=m(r.data),a=m(t.data);e.ports&&"query-state"===t.name&&e.ports.onPopupMessage.send(a)}catch(r){t({name:"app-critical",message:{error:{message:r.toString()}}})}}),r.onmessage=function(r){try{let t=m(r.data),a=m(t.data);e.ports&&"query-state"===t.name?e.ports.onPopupMessage.send(a):console.log(r)}catch(r){t({name:"app-critical",message:{error:{message:r.toString()}}})}}}catch(r){this.dispatchError(r)}}dispatchError(r){let e={name:"unrecoverable",error:{name:r.name,message:r.message,stack:r.stack}};this.logMessage({name:"app-error",message:e}),this.dispatchEvent(new CustomEvent("on-error",{detail:e}))}}window.customElements.define("susi-sentry-light",P)})();
//# sourceMappingURL=wrapper.js.map
